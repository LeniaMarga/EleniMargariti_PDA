'use strict';

var _fs = require('mz/fs');

var fs = _interopRequireWildcard(_fs);

var _path = require('path');

var _2 = require('..');

function _interopRequireWildcard(obj) {
    if (obj && obj.__esModule) {
            return obj;
        } else {
            var newObj = {};

            if (obj != null) {
                    for (var key in obj) {
                        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];
                    }
                }

            newObj.default = obj;
            return newObj;
        }
}

var _ = (typeof require === 'function' ? require('streamline-runtime') : Streamline.require('streamline-runtime'))._;

var _streamline = typeof require === 'function' ? require('streamline-runtime/lib/fibers/runtime') : Streamline.require('streamline-runtime/lib/fibers/runtime');

var _filename = '/Users/bruno/dev/f-promise/examples/disk-usage.ts';

var diskUsage = function diskUsage(dir) {
    return (0, _2.wait)(fs.readdir(dir)).reduce(function (size, name) {
        var sub = (0, _path.join)(dir, name);
        var stat = (0, _2.wait)(fs.stat(sub));
        if (stat.isDirectory()) return size + diskUsage(sub);else if (stat.isFile()) return size + stat.size;else return size;
    }, 0);
};

var printDiskUsage = function printDiskUsage(dir) {
    console.log(dir + ': ' + diskUsage(dir));
};

(0, _2.run)(function () {
    return printDiskUsage(process.cwd());
}).catch(function (err) {
    throw err;
});
//# sourceMappingURL=disk-usage.js.map